<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Paitan Estate - Plantation and Agronomy Report</title>
    <script src="[https://cdn.tailwindcss.com](https://cdn.tailwindcss.com)"></script>
    <script src="[https://cdn.jsdelivr.net/npm/chart.js](https://cdn.jsdelivr.net/npm/chart.js)"></script>
    <link href="[https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap](https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap)" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .details-content { display: none; }
        .details-content.active { display: block; }
        .dropdown-btn.active { background-color: #14532d; } /* dark green */
        .policy-item { border-left: 3px solid #16a34a; padding-left: 1rem; margin-top: 0.75rem; }
        .modal { display: none; }
        .modal.active { display: flex; }
        .chart-container { position: relative; height: 300px; width: 100%; margin: auto; }
        .pie-chart-container { position: relative; height: 350px; width: 100%; margin: auto; }
        .observation-ref { font-size: 0.75rem; color: #57534e; font-style: italic; }
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fade-in 0.5s ease-out forwards;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- Header -->
    <header class="bg-white shadow-md">
        <nav class="container mx-auto px-6 py-4 flex items-center justify-between">
            <div id="header-title" class="text-xl font-bold text-gray-900">
                <!-- Title will be populated by JS -->
            </div>
            <a href="estates.html" class="text-green-800 hover:text-green-900 transition duration-300">&larr; Back to Estates List</a>
        </nav>
    </header>

    <!-- Main container for the report -->
    <div class="container mx-auto p-4 md:p-8">
        <!-- Container where the estate data will be rendered -->
        <div id="selected-estate-container" class="grid grid-cols-1 gap-8">
             <!-- Content will be generated by JavaScript -->
        </div>
    </div>
    
    <!-- Modal for displaying policy details -->
    <div id="policyModal" class="modal fixed inset-0 bg-black bg-opacity-50 z-50 items-center justify-center p-4">
        <div class="bg-white p-6 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] flex flex-col">
            <div class="flex justify-between items-center mb-4">
                <h3 id="modalTitle" class="text-2xl font-bold">Agricultural Policy Cross-Reference</h3>
                <button onclick="closePolicyModal()" class="text-gray-500 hover:text-gray-800 text-2xl font-bold">&times;</button>
            </div>
            <div id="modalContent" class="space-y-4 overflow-y-auto pr-4 flex-grow">
                <!-- Modal content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Main script for application logic -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DATA STORE ---
            const estateData = {
                "id": "paitan",
                "name": "Paitan Estate",
                "reportInfo": "Data based on PA Report (May 2025) & Agronomy Report (July 2025).",
                "summaryMetrics": {
                    "area": {
                        "title": "Estate Area",
                        "lines": [
                            "Total Planted: 2,220.10 ha",
                            "Mature: 2,098.95 ha",
                            "Immature & Replanting: 121.15 ha"
                        ]
                    },
                    "yield": {
                        "title": "Yield/Ha (YTD vs Last Year)",
                        "value": "6.21 MT",
                        "note": "2% above last year"
                    },
                    "cost": {
                        "title": "FFB Cost/Tonne (YTD vs Budget)",
                        "value": "RM 270 / RM 292",
                        "note": "8% lower than budget"
                    },
                    "manuring": {
                        "title": "Manuring Progress (FY25/26)",
                        "value": "Slow",
                        "note": "0% for NK1 & Mix B"
                    },
                     "weeding": {
                        "title": "Weeding Progress (FY25/26)",
                        "value": "Delayed",
                        "note": "Inter-row 53%, Circle 70%"
                    }
                },
                "keyMetrics": [
                    { "icon": `<svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6 text-red-600' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z' /></svg>`, "label": "Harvest Interval", "value": ">20 days (Poor)" },
                    { "icon": `<svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6 text-red-600' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M17.657 18.343A8 8 0 016.343 7.029m11.314 11.314a8 8 0 01-11.314-11.314m2.121 13.435a2 2 0 01-2.828 0l-2.122-2.121a2 2 0 010-2.828l5.656-5.657a2 2 0 012.829 0l2.121 2.121a2 2 0 010 2.828l-5.657 5.657z' /></svg>`, "label": "Manuring Delay", "value": "FY25/26 prog. behind" },
                    { "icon": `<svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6 text-yellow-600' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z' /></svg>`, "label": "Weeding", "value": "Behind schedule" },
                    { "icon": `<svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6 text-yellow-600' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z' /></svg>`, "label": "P&D Status", "value": "Ganoderma census outdated" },
                    { "icon": `<svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6 text-blue-600' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20v-2c0-.656-.126-1.283-.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z' /></svg>`, "label": "Harvester Productivity", "value": "1.86 MT/md (Low)" },
                    { "icon": `<svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6 text-green-600' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 10V3L4 14h7v7l9-11h-7z' /></svg>`, "label": "OER % (YTD)", "value": "19.81%" }
                ],
                "chartData": {
                    "production": {
                        "labels": ["May-24", "Jun-24", "Jul-24", "Aug-24", "Sep-24", "Oct-24", "Nov-24", "Dec-24", "Jan-25", "Feb-25", "Mar-25", "Apr-25"],
                        "ffb": [1.88, 2.15, 2.00, 1.93, 1.99, 1.22, 2.88, 3.14, 3.45, 4.07, 3.83, 0.53],
                        "rainfall": [226, 258, 240, 231, 239, 146, 345, 377, 1038, 488, 459, 63],
                        "note": "*Monthly FFB Yield (MT/Ha) & Rainfall (mm) for FY24/25. (Source: AR Pg. 84)"
                    },
                    "ageProfile": {
                        "labels": ["Old Mature (>20 Yrs)", "Prime Mature (8-19 Yrs)", "Young Mature (4-7 Yrs)", "Immature & Replanting (<4 Yrs)"],
                        "data": [85, 10, 0, 5],
                        "title": "Paitan Estate - Palm Age Distribution",
                        "note": "*Source: Agronomy Report 2/2025, Pg. 9-11."
                    }
                },
                "observations": [
                    "<b>Significant Manuring Delays:</b> The FY24/25 program was completed 3-5 months late. The current FY25/26 program is also behind schedule with 0% progress on Mix B and NK1 fertilizers, a key factor limiting yield. <span class='observation-ref'>(AR Pg. 15, 66)</span>",
                    "<b>Extended Harvesting Intervals:</b> Crop recovery is subpar, with most blocks recording harvesting intervals exceeding 20 days due to harvester gang restructuring and peak crop season. The estate only achieved an average of 4.8 harvesting rounds in 3 months. <span class='observation-ref'>(AR Pg. 18, 69)</span>",
                    "<b>Weeding Program Behind Schedule:</b> Both inter-row (53% complete) and circle spraying (70% complete) are behind schedule. Overgrowth of Volunteer Oil Palms (VOPs) is a particular concern in Blocks 51, 50, and 48. <span class='observation-ref'>(AR Pg. 35, 41)</span>",
                    "<b>Poor Harvesting Standards:</b> While overripe bunches were minimal, the presence of unripe bunches was noted in Block 69 and needs to be addressed, especially with newly recruited harvesters. <span class='observation-ref'>(AR Pg. 19)</span>",
                    "<b>Inconsistent EFB/Compost Application:</b> The application of EFB compost is uneven and incomplete, failing to meet expectations. This prevents it from being factored in for fertilizer reduction. <span class='observation-ref'>(AR Pg. 54-56)</span>",
                    "<b>Outdated Ganoderma Census:</b> The last Ganoderma census was conducted in December 2022. An updated census is required to assess the current status of infection and manage the disease effectively. <span class='observation-ref'>(AR Pg. 50)</span>"
                ],
                "reports": {
                    "plantation": {
                        "Executive Summary": "The estate's performance is acceptable, but there is room for improvement in weeding and harvesting practices. The estate should focus on increasing worker productivity to reduce costs. (Source: PA, Pg. 7-8)",
                        "Area Statement": "The mature area is 1,969.01 ha, with 66.83 ha of immature plantings. Replanting of 114.39 ha commenced in February 2025. (Source: PA, Pg. 10-11)",
                        "Labour Statement": "The estate has an adequate labour force of 172 workers, with a ratio of 1 worker to 9 ha. (Source: PA, Pg. 13)",
                        "Staff Establishment": "Staffing is adequate. (Source: PA, Pg. 15)",
                        "General Charges": "General charges are 10% below budget and are acceptable. (Source: PA, Pg. 18-19)",
                        "Upkeep Cultivation": "Total upkeep cost is 36% below budget. Weeding programs are delayed, but manuring has been completed. (Source: PA, Pg. 20, 24, 33)",
                        "Harvesting and Collection": "The total harvesting cost of RM 81.75/tonne is in line with the budget. Harvesting intervals are good, but harvester productivity is low at 1.86 MT/man-day. (Source: PA, Pg. 58, 59)",
                        "Crop Production": "FFB production for the 11-month period was 33,889 MT, 20% below budget. (Source: PA, Pg. 60)",
                        "Production Cost": "The ex-estate cost of production is RM 270/tonne, 8% below budget. (Source: PA, Pg. 62)",
                        "Vehicles Running Cost": "N/A",
                        "Capital Expenditure": "Capital expenditure is acceptable. (Source: PA, Pg. 67)",
                        "Immature": "The immature area (P2023) has unsatisfactory ground conditions and delayed manuring. (Source: PA, Pg. 73)"
                    },
                    "agronomy": {
                        "Executive Summary": "The second agronomy visit for 2025 was conducted on 18th July 2025. Key yield-limiting factors identified are delays in manuring and extended harvesting intervals. Ground upkeep is slightly delayed, VOPs remain a concern, and canopy management is acceptable, though pruning quality needs improvement. The fertilizer recommendation for FY26/27 has been formulated. <span class='observation-ref'>(AR Pg. 4-8)</span>",
                        "Nutrient inputs progress of manuring": "The FY24/25 manuring program was completed but with significant delays of 3-5 months. The current FY25/26 program is progressing slowly, with 0% application for NK 1 and MIX B as of July 2025, attributed to late fertilizer delivery. <span class='observation-ref'>(AR Pg. 15-16)</span>",
                        "Agronomic observation": "Crop recovery intervals are extended beyond 20 days. While overripe bunches are minimal, unripe bunches are a concern in some blocks. Pruning is 91% complete and generally acceptable, though some over-pruning was noted. Weeding is behind schedule, and VOPs are a major concern in blocks 51, 50, and 48. The Ganoderma census is outdated (last conducted in Dec 2022). <span class='observation-ref'>(AR Pg. 18, 26, 35-36, 41, 50)</span>",
                        "Yield performance": "Full-year yield for FY24/25 was 22% lower than the previous year. However, the current yield for FY25/26 (as of July) shows a 2% increase compared to the same period last year. This improvement is constrained by extended harvesting intervals, which averaged only 4.8 rounds over a 3-month period. <span class='observation-ref'>(AR Pg. 66-69)</span>",
                        "Fertilizer recommendation": "The fertilizer program for FY25/26 remains unchanged. A new recommendation for FY26/27 has been formulated, withdrawing fertilizer for blocks scheduled for replanting and reallocating sub-soil fertilizer from Block 06B-77 to 13C-84. <span class='observation-ref'>(AR Pg. 71)</span>"
                    }
                },
                "policy": " <div class='policy-item'><p class='font-semibold'>Pest Control (Rats)</p><p class='text-sm text-gray-600'><b>Policy Ref: P&D-Rat-01:</b> Rat baiting was carried out on all blocks regardless of infestation levels, which deviates from policy. Policy requires a census first and baiting only when the threshold (>10%) is exceeded. <span class='observation-ref'>(AR Pg. 50)</span></p></div> <div class='policy-item'><p class='font-semibold'>Manuring & Fertilizing</p><p class='text-sm text-gray-600'><b>Policy Ref: FERT-APP-05:</b> Significant delays in the FY24/25 and FY25/26 manuring programs are detrimental to palm nutrient status and yield. Adherence to the schedule is critical. <span class='observation-ref'>(AR Pg. 15, 25)</span></p></div> <div class='policy-item'><p class='font-semibold'>Pruning & Harvesting</p><p class='text-sm text-gray-600'><b>Policy Ref: HARV-STD-02:</b> Harvesting intervals exceeding 20 days and issues with unripe bunches indicate a need to improve harvesting standards to optimize crop recovery and oil quality. <span class='observation-ref'>(AR Pg. 18-19)</span></p></div> <div class='policy-item'><p class='font-semibold'>Replanting</p><p class='text-sm text-gray-600'><b>Policy Ref: REPLANT-LEG-01:</b> The planting of Mucuna at a 1:2 ratio deviates from the standard of two planting points between palms to ensure better ground coverage. <span class='observation-ref'>(AR Pg. 63)</span></p></div>"
            };


            // --- GLOBAL VARIABLES ---
            let chartInstances = {};
            const container = document.getElementById('selected-estate-container');

            // --- FUNCTIONS ---
            function renderEstate() {
                document.getElementById('header-title').innerText = `${estateData.name} Report`;
                container.innerHTML = createEstateHTML(estateData);
                setTimeout(() => {
                    initializeChartsForEstate(estateData);
                    populateInternalDropdowns(estateData);
                    attachEventListeners(estateData);
                }, 0);
            }

            function createEstateHTML(estate) {
                const summaryMetricsHTML = Object.values(estate.summaryMetrics).map(metric => {
                    const colorClass = metric.title.includes('Area') ? 'bg-blue-50 text-blue-800' : 
                                       metric.title.includes('Yield') ? 'bg-green-50 text-green-800' :
                                       metric.title.includes('Cost') ? 'bg-orange-50 text-orange-800' :
                                       metric.title.includes('Manuring') ? 'bg-red-50 text-red-800' : 'bg-yellow-50 text-yellow-800';
                    if (metric.lines) {
                        return `<div class="p-4 rounded-lg ${colorClass}"><h3 class="font-semibold">${metric.title}</h3>${metric.lines.map(line => `<p class="text-sm">${line}</p>`).join('')}</div>`;
                    }
                    return `<div class="p-4 rounded-lg ${colorClass}"><h3 class="font-semibold">${metric.title}</h3><p class="text-2xl font-bold">${metric.value}</p><p class="text-xs text-gray-500 mt-1">${metric.note}</p></div>`;
                }).join('');

                const keyMetricsHTML = estate.keyMetrics.map(metric => `
                    <div class="flex items-center space-x-3 bg-gray-50 p-3 rounded-lg">
                        <div class="bg-gray-100 p-2 rounded-full">${metric.icon}</div>
                        <div><p class="text-sm text-gray-500">${metric.label}</p><p class="font-bold text-lg">${metric.value}</p></div>
                    </div>`).join('');

                const observationsHTML = estate.observations.map(obs => `<li class="ml-4">${obs}</li>`).join('');

                const productionChartHTML = (estate.chartData.production.labels && estate.chartData.production.labels.length > 0) || (estate.chartData.production.rainfall && estate.chartData.production.rainfall.length > 0) ?
                    `<div class="chart-container"><canvas id="prodChart-${estate.id}"></canvas></div>` :
                    `<div class="chart-container flex items-center justify-center bg-gray-50 rounded-lg p-4"><p class="text-gray-500 text-center">A monthly Production vs. Rainfall chart cannot be generated as monthly FFB production data is not available in the reports.</p></div>`;

                return `
                    <div class="bg-white p-6 rounded-lg shadow-lg animate-fade-in">
                        <h2 class="text-3xl font-bold mb-2 text-gray-900">${estate.name}</h2>
                        <p class="text-sm text-gray-500 mb-6 italic">${estate.reportInfo}</p>
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 mb-8">${summaryMetricsHTML}</div>
                        <div class="mb-8"><h3 class="text-xl font-semibold mb-4 border-b pb-2">Key Metrics & Agronomic Status</h3><div class="grid grid-cols-2 md:grid-cols-3 gap-4 mt-4">${keyMetricsHTML}</div></div>
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                            <div><h3 class="text-xl font-semibold mb-2">Monthly Production vs Rainfall</h3>${productionChartHTML}<p class="text-xs text-center text-gray-500 mt-2">${estate.chartData.production.note}</p></div>
                            <div><h3 class="text-xl font-semibold mb-2">Palm Age Profile</h3><div class="pie-chart-container"><canvas id="ageChart-${estate.id}"></canvas></div><p class="text-xs text-center text-gray-500 mt-2">${estate.chartData.ageProfile.note}</p></div>
                        </div>
                        
                        <div class="mb-8">
                            <h3 class="text-xl font-semibold mb-2 border-b pb-2">Key Observations & Issues</h3>
                            <ul id="observations-list" class="list-disc list-inside space-y-2 text-gray-700 mt-4">${observationsHTML}</ul>
                        </div>
                        
                        <div class="mb-8 text-center"><button class="policy-modal-btn bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition shadow-md">View Agricultural Policy Cross-Reference</button></div>
                        <div class="space-y-2">
                            <button data-dropdown-id="${estate.id}-plantation" class="dropdown-btn w-full text-left bg-gray-800 text-white p-3 rounded-md hover:bg-gray-700 transition">Plantation Advisory Report Details</button>
                            <div id="${estate.id}-plantation" class="details-content bg-gray-50 p-4 rounded-md border border-gray-200"></div>
                            <button data-dropdown-id="${estate.id}-agronomy" class="dropdown-btn w-full text-left bg-gray-800 text-white p-3 rounded-md hover:bg-gray-700 transition">Agronomy Report Details</button>
                            <div id="${estate.id}-agronomy" class="details-content bg-gray-50 p-4 rounded-md border border-gray-200"></div>
                        </div>
                    </div>`;
            }

            function initializeChartsForEstate() {
                const prodCanvasId = `prodChart-${estateData.id}`;
                const ageCanvasId = `ageChart-${estateData.id}`;
                if (chartInstances[prodCanvasId]) chartInstances[prodCanvasId].destroy();
                if (chartInstances[ageCanvasId]) chartInstances[ageCanvasId].destroy();

                const prodCtx = document.getElementById(prodCanvasId)?.getContext('2d');
                if(prodCtx && ((estateData.chartData.production.labels && estateData.chartData.production.labels.length > 0) || (estateData.chartData.production.rainfall && estateData.chartData.production.rainfall.length > 0))) {
                    const datasets = [];
                    if (estateData.chartData.production.ffb && estateData.chartData.production.ffb.length > 0) {
                        datasets.push({ label: 'FFB Yield (MT/Ha)', data: estateData.chartData.production.ffb, type: 'line', borderColor: '#ca8a04', backgroundColor: 'transparent', yAxisID: 'y-ffb', tension: 0.4 });
                    }
                    if (estateData.chartData.production.rainfall && estateData.chartData.production.rainfall.length > 0) {
                        datasets.push({ label: 'Rainfall (mm)', data: estateData.chartData.production.rainfall, backgroundColor: '#3b82f6', yAxisID: 'y-rainfall' });
                    }

                    chartInstances[prodCanvasId] = new Chart(prodCtx, {
                        type: 'bar',
                        data: {
                            labels: estateData.chartData.production.labels,
                            datasets: datasets
                        },
                        options: { responsive: true, maintainAspectRatio: false, scales: { x: { grid: { display: false } }, 'y-ffb': { type: 'linear', position: 'left', title: { display: true, text: 'FFB Yield (MT/Ha)' } }, 'y-rainfall': { type: 'linear', position: 'right', title: { display: true, text: 'Rainfall (mm)' }, grid: { drawOnChartArea: false } } } }
                    });
                }

                const ageCtx = document.getElementById(ageCanvasId)?.getContext('2d');
                if(ageCtx && estateData.chartData.ageProfile.data && estateData.chartData.ageProfile.data.length > 0) {
                    chartInstances[ageCanvasId] = new Chart(ageCtx, {
                        type: 'pie',
                        data: {
                            labels: estateData.chartData.ageProfile.labels,
                            datasets: [{ data: estateData.chartData.ageProfile.data, backgroundColor: ['#b91c1c', '#fb923c', '#a7f3d0', '#6ee7b7'], hoverOffset: 4 }]
                        },
                        options: { responsive: true, maintainAspectRatio: false, plugins: { title: { display: false }, legend: { position: 'right' } } }
                    });
                }
            }
            
            function populateInternalDropdowns() {
                const agronomyDiv = document.getElementById(`${estateData.id}-agronomy`);
                const plantationDiv = document.getElementById(`${estateData.id}-plantation`);
                if (agronomyDiv && estateData.reports.agronomy) {
                    agronomyDiv.innerHTML = Object.entries(estateData.reports.agronomy).map(([section, content]) => `<h4 class="font-semibold mt-2 text-gray-800">${section.replace(/([A-Z])/g, ' $1').trim()}:</h4><p class="text-sm text-gray-600">${content}</p>`).join('');
                }
                if (plantationDiv && estateData.reports.plantation) {
                    plantationDiv.innerHTML = Object.entries(estateData.reports.plantation).map(([section, content]) => `<h4 class="font-semibold mt-2 text-gray-800">${section.replace(/([A-Z])/g, ' $1').trim()}:</h4><p class="text-sm text-gray-600">${content}</p>`).join('');
                }
            }

            function attachEventListeners() {
                container.querySelectorAll('.dropdown-btn').forEach(button => {
                    button.addEventListener('click', (event) => {
                        const id = event.currentTarget.dataset.dropdownId;
                        const content = document.getElementById(id);
                        const isActive = content.classList.toggle('active');
                        event.currentTarget.classList.toggle('active', isActive);
                    });
                });
                container.querySelector('.policy-modal-btn')?.addEventListener('click', () => openPolicyModal(estateData));
            }

            renderEstate();
        });
        
        function openPolicyModal(estate) {
            const modalTitle = document.getElementById('modalTitle');
            const modalContent = document.getElementById('modalContent');
            modalTitle.innerText = `Agricultural Policy Cross-Reference: ${estate.name}`;
            modalContent.innerHTML = estate.policy;
            document.getElementById('policyModal').classList.add('active');
        }

        function closePolicyModal() {
            document.getElementById('policyModal').classList.remove('active');
        }
    </script>
</body>
</html>
